<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Painel do Vendedor</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<nav class="navbar navbar-dark bg-dark">
  <div class="container">
    <a class="navbar-brand fw-bold" href="index.html">PangolesGames</a>
  </div>
</nav>

<div class="container py-5">
  <h1 class="text-center fw-bold mb-4">Painel do Vendedor</h1>

  <div class="d-flex gap-3 mb-4">
    <button class="btn btn-primary" onclick="mostrarPedidos()">ðŸ“¦ Ver Pedidos</button>
    <button class="btn btn-success" onclick="mostrarCadastroProduto()">âž• Cadastrar Produto</button>
  </div>

  <div id="conteudo"></div>
</div>

<script>
  const currentUser = JSON.parse(localStorage.getItem("currentUser"));
  if (!currentUser || currentUser.email !== "admin@admin.com") {
    alert("Acesso negado.");
    window.location.href = "login.html";
  }

  function mostrarPedidos() {
    const pedidos = JSON.parse(localStorage.getItem("pedidos")) || [];
    let html = "<h3 class='mb-3'>Pedidos dos Clientes</h3>";

    if (pedidos.length === 0) {
      html += "<p class='text-muted'>Nenhum pedido realizado ainda.</p>";
    } else {
      pedidos.forEach(p => {
        html += `
          <div class="card mb-3 p-3">
            <h5>Pedido #${p.id}</h5>
            <p><strong>Cliente:</strong> ${p.cliente.nome} (${p.cliente.email})</p>
            <p><strong>EndereÃ§o:</strong> ${p.cliente.endereco}</p>
            <p><strong>MÃ©todo:</strong> ${p.metodo}</p>
            <p><strong>Total:</strong> R$ ${p.total.toFixed(2)}</p>
            <h6>Itens:</h6>
            <ul>
              ${p.itens.map(i => `<li>${i.nome} â€” x${i.quantidade}</li>`).join("")}
            </ul>
          </div>
        `;
      });
    }

    document.getElementById("conteudo").innerHTML = html;
  }


  function mostrarCadastroProduto() {
    document.getElementById("conteudo").innerHTML = `
      <h3 class="mb-3">Cadastrar Produto</h3>
      <form onsubmit="salvarProduto(event)">
        <div class="mb-3">
          <label class="form-label">Nome</label>
          <input id="pNome" class="form-control" required>
        </div>
        <div class="mb-3">
          <label class="form-label">PreÃ§o</label>
          <input id="pPreco" type="number" class="form-control" required>
        </div>
        <div class="mb-3">
          <label class="form-label">URL da Imagem</label>
          <input id="pImg" class="form-control" placeholder="IMG/play5.png" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Estoque Inicial</label>
          <input id="pEstoque" type="number" class="form-control" required>
        </div>

        <button class="btn btn-success mt-3">Salvar Produto</button>
      </form>
    `;
  }


  function salvarProduto(e) {
    e.preventDefault();

    const nome = document.getElementById("pNome").value.trim();
    const preco = Number(document.getElementById("pPreco").value);
    const img = document.getElementById("pImg").value.trim();
    const estoqueInicial = Number(document.getElementById("pEstoque").value);

    const produtos = JSON.parse(localStorage.getItem("produtos")) || [];

    const novoProduto = {
      id: Date.now(),
      nome,
      preco,
      img,
      estoque: estoqueInicial
    };

    produtos.push(novoProduto);
    localStorage.setItem("produtos", JSON.stringify(produtos));

    alert("Produto cadastrado com sucesso!");

    mostrarPedidos();
  }
</script>

</body>
</html>
