<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Checkout | PangolesGames</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <nav class="navbar navbar-dark bg-dark">
    <div class="container">
      <a class="navbar-brand fw-bold" href="index.html">PangolesGames</a>
    </div>
  </nav>

  <main class="container py-5">
    <h1 class="text-center fw-bold mb-4">Finalizar Compra</h1>

    <div id="produto-selecionado" class="mb-4"></div>

    <form id="form-checkout" class="mx-auto" style="max-width:600px">
      <div class="mb-3">
        <label class="form-label">Nome</label>
        <input id="nome" class="form-control" required>
      </div>
      <div class="mb-3">
        <label class="form-label">Email</label>
        <input id="email" type="email" class="form-control" required>
      </div>
      <div class="mb-3">
        <label class="form-label">EndereÃ§o</label>
        <input id="endereco" class="form-control" required>
      </div>
      <div class="mb-3">
        <label class="form-label">Pagamento</label>
        <select id="pagamento" class="form-select" required>
          <option value="">Selecione</option>
          <option value="cartao">CartÃ£o</option>
          <option value="pix">PIX</option>
          <option value="boleto">Boleto</option>
        </select>
      </div>
      <button class="btn btn-success w-100" type="submit">Confirmar Compra</button>
    </form>
  </main>

  <footer class="bg-dark text-white text-center py-3">Â© 2025 PangolesGames</footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // carrega item especÃ­fico salvo por comprarAgora (ou checkoutItems)
    const produtoCheckout = JSON.parse(localStorage.getItem('produtoCheckout'));
    const checkoutItems = JSON.parse(localStorage.getItem('checkoutItems')) || [];
    const target = document.getElementById('produto-selecionado');

    if (produtoCheckout) {
      target.innerHTML = `<div class="card p-3 mb-3"><h5>${produtoCheckout.nome}</h5><p class="text-success">R$ ${produtoCheckout.preco.toFixed(2)}</p></div>`;
    } else if (checkoutItems.length) {
      let html = '<div class="card p-3 mb-3"><h5>Itens:</h5><ul>';
      checkoutItems.forEach(i => html += `<li>${i.nome} â€” R$ ${i.preco.toFixed(2)} x${i.quantidade}</li>`);
      html += '</ul></div>';
      target.innerHTML = html;
    } else {
      target.innerHTML = '<p class="text-muted">Nenhum produto selecionado.</p>';
    }

    document.getElementById('form-checkout').addEventListener('submit', e => {
      e.preventDefault();
      alert('Compra finalizada! Obrigado por comprar na PangolesGames ðŸŽ®');
      // limpa carrinho e dados de checkout
      localStorage.removeItem('carrinho');
      localStorage.removeItem('produtoCheckout');
      localStorage.removeItem('checkoutItems');
      window.location.href = 'index.html';
    });
  </script>
</body>
</html>
